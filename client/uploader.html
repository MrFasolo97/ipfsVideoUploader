<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="public/styles.css">
        <link rel="shortcut icon" href="public/logo.png">
        <title>OneLoveDTube Uploader</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/async/3.1.0/async.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/steemconnect@latest"></script>
        <script src="//cdn.steemjs.com/lib/latest/steem.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/jitbit/HtmlSanitizer@master/HtmlSanitizer.js"></script>
        <script src="client/languages.js"></script>
        <script type="module" src="client/uploader.js"></script>
        <script type="module" src="client/thumbnailSwapper.js"></script>
        <script src="client/wcinfo.js"></script>
    </head>
    <body>
        <div id='header'>
            <h1 id="siteTitle"><a href="/" class="title"><img id="logoBanner" src="public/logo.png" alt="onelovedtube logo"></a>  <div id="headTitleText">OneLoveDTube Uploader</div></h1>
            <div class="dropdown">
                <a id="modeBtn" class="styledButton">Menu <i class="dropdownArrow"></i></a>
                <div id="dropdownbox" class="dropdown-content">
                    <a id="newUploadModeBtn">New upload</a>
                    <a id="snapSwapModeBtn">Thumbnail Swap</a>
                    <a id="subDetModeBtn">Subscription details</a>
                </div>
            </div>
        </div>
        <div id='content' class="uploadcontent">
        <div id="uploadForm">
            <div id="tab">
                <a class="tabs" id="tabBasics">Basics</a>
                <a class="tabs" id="tabSubtitles">Subtitles</a>
                <a class="tabs" id="tabAdvanced">Advanced</a>
            </div>
            <div id="basics"> <!-- Basics tab -->
                <h3>Upload a video (mp4 file accepted): <input type="file" accept="video/mp4" name="VideoUpload" id="sourcevideo"></h3>
                <h3>Upload a thumbnail: <input type="file" accept="image/jpeg,image/png" name="SnapUpload" id="snapfile"></h3>
                <h3>Title: <br><input type="text" id="title" name="title" class="meta"></h3>
                <h3>Description: <br>
                <textarea id="description" name="description"></textarea></h3>
                <h3>Tags (seperated by space): <br><input type="text" id="tags" name="tags" class="meta"></h3>
                <h5 id="tagInfo1">The first tag (out of 4 tags) that you have chosen will be the first curated tag on your Avalon post.</h5>
                <label class="switch">
                    <input type="checkbox" name="powerup" id="powerup">
                    <span class="slider round"></span>
                </label><h3 class="poweruptext"> Power Up 100%</h3><br><br>
                <div id="avalonZone" class="curvedbox">
                    <h3 id="avalonvwlabel">Avalon vote weight: 1%</h3>
                    <div class="slidecontainer">
                        <input type="range" min="1" max="100" value="1" class="rangeslider" id="avalonvw">
                    </div>
                    <div class="warningbox" id="avalonhighvwalert">Using more than 10% of your Avalon voting power will drain your vote tokens in your Avalon blockchain account significantly.</div>
                </div>
            </div>
            <div id="subtitles"> <!-- Subtitles tab -->
                <h3>Add subtitles to your video</h3>
                <h5>You may wish to create subtitles for your videos for multiple languages. To create your subtitles, use a subtitle creator tool and upload the subtitle file here.<br><br>Only WebVTT files are accepted as this is the only format DTube supports right now!</h5>
                <h4>Upload a new subtitle<br>
                    <input list="languages" class="meta" id="newLanguageField" placeholder="Choose language">
                    <input type="file" id="subtitleUpload" style="display: none">
                    <a onclick="document.getElementById('subtitleUpload').click();return true;" id="chooseSubBtn" class="styledButton">Choose subtitle file</a>
                    <a id="uploadSubBtn" class="styledButton">Upload subtitle</a>
                </h4>
                <datalist id="languages"></datalist>
                <h4>Your subtitles</h4>
                <table class="subList" id="subList"></table>
            </div>
            <div id="advanced"> <!-- Advanced tab -->
                <h3>Upload user encoded videos</h3>
                <h5>You may choose to upload a lower resolution version of your source video that you have selected in the "Basics" tab, so that your video will be playable in lower resolutions for viewers who have poor internet connection.<br><br>Do not choose the same video file you have selected in the "Basics" tab!</h5>
                <h4>240p video: <input type="file" accept="video/mp4" name="Video240Upload" id="video240p"></h4>
                <h4>480p video: <input type="file" accept="video/mp4" name="Video480Upload" id="video480p"></h4>
                <h4>720p video: <input type="file" accept="video/mp4" name="Video720Upload" id="video720p"></h4>
                <h4>1080p video: <input type="file" accept="video/mp4" name="Video1080Upload" id="video1080p"></h4>
                <h3>STEEM Article Body: <br>
                <textarea id="postBody" name="postBody"></textarea></h3>
                <input type="file" accept="image/*" id="postImg" style="display: none">
                <a onclick="document.getElementById('postImg').click();return true;" id="postImgBtn" class="roundedBtn">Upload an image for article body</a>
                <h5>Maximum file size for image: 7MB</h5>
                <h3>Beneficiaries</h3>
                <h5>By default, 2% beneficiary is set to @dtube Steem account to support their development and curation efforts. You may add additional accounts below as beneficiaries of your Steem post.</h5>
                <input type="text" id="newBeneficiaryUser" name="newBeneficiaryUser" class="meta" placeholder="New beneficiary username">
                <input type="number" id="newBeneficiaryPercent" name="newBeneficiaryPercent" class="meta" placeholder="%" min="0.01" max="98" step="0.01">
                <a class="styledButton" id="appendBeneficiaryBtn">+</a><br>
                <table class="beneficiaryTableList" id="beneficiaryTableList"></table>
                <h3 id="totalBeneficiariesLabel">Total beneficiaries: 2%</h3>
            </div>
            <input class="styledButton" type="submit" value="Upload!" id="submitbutton">
            <input class="styledButton" type="button" value="Save draft" id="draftBtn">
            <h4 id="loggedInUser">Detecting login...</h4>
            <div id="progressBarBack">
                <div id="progressBarFront">Uploading... (0%)</div>
            </div>
        </div>
        <div id="thumbnailSwapper">
            <div class="warningbox" id="thumbnailSwapNoAvalon">As you are not logged in with Avalon, the post on Avalon blockchain will not be updated. Therefore, only the Steem post will be updated with the new thumbnail.</div>
            <h3>Link to d.tube video to swap thumbnail:</h3>
            <input type="text" class="meta" placeholder="Paste d.tube link here" id="thumbnailSwapLink">
            <a class="roundedBtn" id="linkSubmitBtn">Submit Link</a>
            <div id="linkResult">
                <table><tr>
                    <td id="currentSnap"></td>
                    <td id="videoInfo"></td>
                </tr></table>
                <h3 id="newSnapField">Upload new thumbnail to replace (7MB max): <input type="file" accept="image/jpeg,image/png" id="newSnap"></h3>
                <input class="styledButton" type="submit" value="Submit!" id="swapSubmitBtn"><br>
            </div>
        </div>
        <div id="wcinfo"> <!-- User info page (e.g. WC subscription package, quota available etc.) -->
        </div>
        </div>
        <div id='footer'><h4 class="madeBy">Made by <a target="_blank" rel="noreferrer" href=https://d.tube/c/techcoderx>@techcoderx</a> - <a target="_blank" rel="noreferrer" href=https://github.com/techcoderx/ipfsVideoUploader>Source Code</a> - <a target="_blank" rel="noreferrer" href="https://discord.gg/Sc4utKr">Discord</a> - <a target="_blank" rel="noreferrer" href="https://github.com/techcoderx/ipfsVideoUploader/blob/master/docs/FAQ.md">FAQ</a></h4></div>
    </body>
</html>
